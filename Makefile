# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: emartin2 <emartin2@student.42barcel>       +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2023/08/27 12:08:42 by emartin2          #+#    #+#              #
#    Updated: 2023/09/24 10:30:46 by emartin2         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

NAME =	push_swap
CFLAGS =	-Wall -Wextra -Werror
SOURCES = atoi.c \
			check_input.c \
			list_utils.c \
			main.c \
			orders/push.c \
			orders/rotate.c\
			orders/swap.c \
			utils.c \
			orders/reverse_rotate.c \
			list_utils2.c \
			list_utils3.c

#SOURCES_BONUS = 
HEADER = pushswap.h 

OBJECTS =	${SOURCES:.c=.o}
#OBJECTSBONUS =	${SOURCES_BONUS:.c=.o}

LIBFT_DIR = otherproject/libft/
PRINTF_DIR = otherproject/printf/
LIBS_DIR = libs/


#metodo implicito
%.o:%.c $(HEADER)
	gcc ${CFLAGS} -c $< -o $@

#mis metodos
all:${NAME}

${NAME}:: ${OBJECTS}
	gcc  ${CFLAGS} ${SOURCES} -L ${LIBS_DIR} -o ${NAME}

${NAME}::
	$(MAKE) -C $(LIBFT_DIR)
	cp $(LIBFT_DIR)libft.a ${LIBS_DIR}
	

${NAME}::
	$(MAKE) -C $(PRINTF_DIR)
	cp $(PRINTF_DIR)libftprintf.a ${LIBS_DIR}
	
clean:
	rm -f ${OBJECTS}
	make clean -C ${LIBFT_DIR}
	make clean -C ${PRINTF_DIR}

fclean:
	rm -f ${NAME} ${OBJECTS}
	make fclean -C ${LIBFT_DIR}
	make fclean -C ${PRINTF_DIR}
	rm -f ${LIBS_DIR}*.a 

re:
	make fclean
	make fclean -C ${LIBFT_DIR}
	make fclean -C ${PRINTF_DIR}
	make

test1:
	gcc  ${CFLAGS} ${SOURCES}  -o ${NAME}
	./${NAME} ${INPUT}

check:
	./${NAME} ${INPUT} | ~/Desktop/checher_Mac ${INPUT}
	./${NAME} ${INPUT} |wc -l

debug:
	
	gcc  ${CFLAGS} ${SOURCES}  -g -o test
	lldb test ${INPUT}

leak:
	clang -g -fsanitize=address  ${SOURCES}  -o testm	
	./testm ${INPUT}

INPUT = -474 398 230 -437 627 -370 -78 -286 954 571 434 -418 -889 -860 310 -469 -150 -805 659 288 757 -381 -393 -417 -922 -769 365 -794 -705 -259 -416 -820 888 -415 -810 -491 -696 970 852 119 941 858 732 -523 652 -610 31 -806 -360 -729 -692 -779 519 -637 738 640 -432 15 111 -613 -872 747 -147 850 953 439 -926 829 798 268 441 746 756 717 316 -269 -217 16 232 608 -659 606 -222 122 187 -706 -444 683 -359 135 -853 -95 -458 60 -622 692 164 -921 -943 396 43 922 668 -436 -173 -201 -219 -772 989 -589 397 -287 -501 -871 443 -84 629 354 -476 868 -151 -568 802 -77 600 -328 -60 409 -652 475 -224 -142 -482 -905 -351 359 -951 874 429 866 149 -175 -524 36 927 855 -857 382 833 5 -713 523 231 -827 349 -348 -462 337 -403 -248 235 98 -26 696 -144 25 103 -159 -43 -665 -44 609 301 -431 -285 861 -988 -636 -100 -98 -50 -804 158 942 626 -204 -212 150 760 -301 57 368 -516 238 -691 68 -831 -723 -982 938 110 875 246 -743 -543 344 -255 -369 -162 47 -419 474 -587 -847 -141 389 889 -507 610 -682 -195 -541 -964 -70 502 -420 137 775 951 -10 -736 51 515 -270 385 773 -65 -336 545 -413 896 401 887 915 -635 994 893 -440 353 590 528 -669 -521 -203 -454 343 831 62 105 -76 501 -509 226 698 167 478 266 -615 -34 639 -377 -701 297 555 824 153 0 583 -631 -380 335 -661 -492 566 -465 142 181 -155 -129 134 722 -899 620 708 557 936 695 -108 -411 -760 -770 645 13 -488 84 -781 -641 -81 364 186 -82 628 182 -956 -445 450 -471 782 185 897 369 -990 -320 -972 -970 -883 -479 999 955 -179 -209 -326 642 -841 293 227 -658 -551 538 -531 -342 30 -223 998 391 772 94 408 370 -185 -573 367 836 575 613 8 461 49 -670 277 174 966 -596 -542 78 723 -401 -999 448 -949 825 -299 -138 -467 -987 67 -570 -933 630 783 -667 -39 -716 543 -396 676 -510 -753 -233 394 -605 974 914 -451 812 140 797 11 -64 928 693 -312 622 -48 997 674 -809 -678 109 -797 -748 352 -639 -14 -338 -324 -412 952 -187 -946 940 702 533 -489 -238 210 -627 183 -915 -318 -528 2 894 -796 -673 781 -515 375 -319 -854 -116 114 -859 553 -49 -601 198 -12 -310 944 338 902 869 388 386 -468 -139 433 840 -124 270 -211 -459 476 -902 428 671 587 921 -882 -884 901 -197 -29 219 -423 -345 -909 576 579 455 -680 900 40 -808 161 -791 -83 -191 785 56 372 373 145 -758

.PHONY: all clean fclean re test1 check debug leak